<template>  <div class="v-table">    <div class="v-table__header">      <p class="v-table__col">Avatar</p>      <p class="v-table__col v-table__action" @click="sortNumber('id')">        <span class="v-table__action-header">          ID          <span class="material-icons v-table__icon-sort">sort</span>        </span>      </p>      <p class="v-table__col v-table__action" >        <span class="v-table__action-header" @click="sortText('first_name')">          Name          <span class="material-icons v-table__icon-sort">sort</span>        </span>        <select            class="v-table__select"            v-model="filters.name"            @change="applyFilter('first_name', filters.name)"        >          <option v-for="option in nameOptions"                  :key="option"          >            {{option}}          </option>        </select>      </p>      <p class="v-table__col v-table__action" @click="sortText('last_name')">        <span class="v-table__action-header">          Last name          <span class="material-icons v-table__icon-sort">sort</span>        </span>      </p>      <p class="v-table__col">Phone</p>      <p class="v-table__col v-table__action">        <span class="v-table__action-header" @click="sortText('gender')">          Gender          <span class="material-icons v-table__icon-sort">sort</span>        </span>        <select            class="v-table__select"            v-model="filters.gender"            @change="applyFilter('gender', filters.gender)"        >          <option v-for="option in genderOptions"                  :key="option"          >            {{option}}          </option>        </select>      </p>      <p class="v-table__col v-table__action" @click="sortDate('date_of_birth')">        <span class="v-table__action-header">          Date of birth        <span class="material-icons v-table__icon-sort">sort</span>        </span>      </p>    </div>    <div class="v-table__body" v-if="showPagination">      <v-table-row          v-for="row in paginatedUsers"          :key="row.uid"          :row-data="row"      />    </div>    <div class="v-table__body" v-if="showScroll">      <v-table-row          v-for="row in infiniteDataTable"          :key="row.uid"          :row-data="row"      />      <infinite-loading @infinite="infiniteHandler" class="v-table__infinite">        <div slot="no-more">Данных больше нет</div>        <div slot="no-results">Не найдено данных</div>      </infinite-loading>    </div>    <div v-if="showPagination" class="v-table__pagination">        <button class="v-table__page"             v-for="page in pages"             :key="page"             @click="pageClick(page)"              :class="{'v-table__page_selected': page === pageNumber }"        >          {{page}}        </button>    </div>  </div></template><script>import VTableRow from "./v-table-row";import InfiniteLoading from 'vue-infinite-loading';import {mapActions, mapGetters} from "vuex";export default {  name: "v-table",  components: {VTableRow, InfiniteLoading},  props: {    showPagination: {      type: Boolean,      default: false    },    showScroll: {      type: Boolean,      default: false    }  },  data(){    return {      tablePerPage: 10,      pageNumber: 1,      sortedProp: null,      sortKey: "",      filters: {        name: 'All',        gender: 'All',      },      filterDataTable: [],      infiniteDataTable: [],    }  },  computed: {    pages() {      return Math.ceil(this.filterDataTable.length / this.tablePerPage)    },    paginatedUsers(){      let from = (this.pageNumber - 1) * this.tablePerPage;      let to = from + this.tablePerPage;      return this.filterDataTable.slice(from, to);    },    genderOptions(){      return this.getOptions('gender')    },    nameOptions(){      return this.getOptions('first_name')    },    ...mapGetters([      'USERS'    ])  },  methods: {    infiniteHandler($state){      setTimeout(() => {        this.infiniteDataTable.push(...this.paginatedUsers);        $state.loaded();        this.pageNumber = this.pageNumber + 1;        if(this.infiniteDataTable.length === this.filterDataTable.length){          $state.complete();        }      }, 250);    },    pageClick(page){      this.pageNumber = page    },    sortText(field){      this.filterDataTable.sort((a,b)=> a[field].localeCompare(b[field]));    },    sortNumber(field){      this.filterDataTable.sort((a,b)=> a[field]-b[field]);    },    sortDate(field){      this.filterDataTable.sort((a,b)=> a[field].localeCompare(b[field]))    },    getOptions(key){      let result = ['All'];      this.filterDataTable.map(item=>{        result.push(item[key])      })      return result = [... new Set(result)]    },    applyFilter(key, value) {        if (value === 'All') {          this.filterDataTable = [...this.USERS]        } else {          this.filterDataTable = this.filterDataTable.filter(item => item[key] === value)        }    },    ...mapActions([      'GET_USERS_FROM_API'    ])  },  mounted() {    this.GET_USERS_FROM_API()    .then(()=> {      this.filterDataTable = [...this.USERS]    })  }}</script><style>  .v-table{    max-width: 900px;    margin: 0 auto;  }  .v-table__header {    display: grid;    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));    border-bottom: 1px solid #ccc;  }  .v-table__col {    padding: 10px;    display: flex;    flex-wrap: wrap;    align-items: center;    justify-content: center;    box-shadow: 0 0 0 1px #ccc;  }  .v-table__pagination {    border-top: 1px solid #cccccc;    padding-top: 20px;    margin-top: 20px;    display: flex;    justify-content: center;    align-items: center;    gap: 10px;  }  .v-table__page {    padding: 10px;    border: 1px solid #cccccc;    background-color: transparent;    cursor: pointer;  }  .v-table__page:hover {    background-color: #cccccc;  }  .v-table__page_selected {    background-color: antiquewhite;  }  .v-table__action {    cursor: pointer;  }  .v-table__action-header {    display: flex;    align-items: center;    align-items: center;    gap: 5px;  }  .v-table__select {    display: block;    width: 100%;  }  .v-table__infinite {    margin-top: 20px;    margin-bottom: 20px;  }  .infinite-status-prompt {    padding: 10px;    border: 1px solid #cccccc;  }</style>